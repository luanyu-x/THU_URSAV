

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>技术说明 &mdash; THU_URSAV v1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5a3fd9cb"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="DroneKit记录" href="../DroneKit%E8%AE%B0%E5%BD%95/DroneKit%E8%AE%B0%E5%BD%95.html" />
    <link rel="prev" title="汇总" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            THU_URSAV
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">汇总</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">技术说明</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">飞机相关</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">名词解释</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mission-planner">Mission Planner地面站</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dronekit">DroneKit库</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sitl">SITL仿真</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#linux">Linux相关</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id5">图像识别相关</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#numpy">NumPy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yolo">YOLO神经网络</a></li>
<li class="toctree-l3"><a class="reference internal" href="#opencv">OpenCV</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python">python相关</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#anaconda-minicondaminiforge">Anaconda(Miniconda、Miniforge)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging">logging库</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argparse">argparse库</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiprocessing">multiprocessing库</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id6">一些补充</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../DroneKit%E8%AE%B0%E5%BD%95/DroneKit%E8%AE%B0%E5%BD%95.html">DroneKit记录</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SITL%E8%B0%83%E8%AF%95/SITL%E8%B0%83%E8%AF%95.html">配置ArduPilot SITL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97/%E4%B8%AA%E4%BA%BA%E6%97%A5%E5%BF%97.html">个人日志</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">THU_URSAV</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">汇总</a></li>
      <li class="breadcrumb-item active">技术说明</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/技术说明/技术说明.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>技术说明<a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
<p>by 徐锦豪 2024.10</p>
<p>写在前面：以下各项技术几乎都有官方文档，最好先从官方文档学习各项技术，遇到问题也应该先查官方文档或者官方github的issues，然后再在搜索引擎查或者问GPT。PS：GPT适合用来写代码片段或者写小工具，不要把所有代码逻辑都让GPT来写。对于一些重复性强的小问题，例如写个批量给图片命名的python脚本，就非常适合交给GPT来干。</p>
</section>
<section id="id2">
<h1>飞机相关<a class="headerlink" href="#id2" title="Link to this heading"></a></h1>
<section id="id3">
<h2>名词解释<a class="headerlink" href="#id3" title="Link to this heading"></a></h2>
<ol>
<li><p>飞控：飞控又称飞行控制器，用于对飞行器的其他系统及元器件起到协同控制的元件，可以理解为飞机的“小脑”（与之对应的是机载电脑，承担高级工作，相当于“大脑”）。</p></li>
<li><p>固件：Firmware，可以理解为固定在硬件中的程序。飞控固件就是烧录进飞控处理器中的一套程序，用于控制飞机等。</p></li>
<li><p>飞控参数：即飞控程序中的参数，相当于留给用户的API接口，让用户根据实际情况设定这些值，让飞机更能按照自己的需求飞行。（详见“飞控参数调整”文档）</p></li>
<li><p>航点：飞控会按照给定的航点进行飞行，航点命令有很多，常用的有takeoff、waypoint、do_jump、land。航点命令有可调的参数，例如takeoff有pitch和alt，注意调整为合适的值。</p></li>
<li><p>飞行模式：飞控中有不同的飞行模式，例如Manual, Stabilize, Auto, RTL, Circle, FWBA, Autotune等，具体请查阅文档，正常情况下只需要用到前三个即可。</p></li>
<li><p>飞行日志：飞控会保存每次解锁后的日志（相当于黑匣子），通过地面站或者SD卡下载后，可以分析飞机飞行的各项属性。</p></li>
<li><p>仿真：有一些程序可以用来模拟飞机的飞行，一般用来测试规划的航线等。</p></li>
<li><p>各种航电设备：</p>
<p><img alt="硬件1.png" src="../_images/1.png" /></p>
</li>
</ol>
</section>
<section id="mission-planner">
<h2>Mission Planner地面站<a class="headerlink" href="#mission-planner" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://ardupilot.org/planner/">MP官方文档</a></p>
<p>简介：地面站是用于连接飞控的地面控制站，可用于查看飞机状态、规划航线、发送指令、烧写参数等。</p>
<p>掌握：</p>
<ol class="simple">
<li><p>调出飞机实时信息</p></li>
<li><p>航点的规划、上传、读取、保存</p></li>
<li><p>给飞控烧写固件</p></li>
<li><p>飞机飞行前进行必要的校准：加速度计校准、遥控器校准、电调校准、指南针校准、空速计校准等</p></li>
<li><p>RTK的收敛与位置保存</p></li>
<li><p>理解飞机某些参数的意义并会烧写参数（具体见“飞控参数调整”文档）</p></li>
<li><p>下载飞控日志</p></li>
<li><p>其他未尽事宜</p></li>
</ol>
</section>
<section id="dronekit">
<h2>DroneKit库<a class="headerlink" href="#dronekit" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://dronekit.netlify.app/">DroneKit文档</a></p>
<p>Github：https://github.com/dronekit/dronekit-python</p>
<p>简介：DroneKit-Python是一个用于控制无人机的Python库。DroneKit提供了用于控制无人机的API，其代码独立于飞控，单独运行在机载电脑（Companion Computer）或其他设备之上，通过串口或无线的方式经MAVLink协议与飞控板通信。</p>
<p>（详见“DroneKit记录”文档）</p>
<p><a class="reference internal" href="../DroneKit%E8%AE%B0%E5%BD%95/DroneKit%E8%AE%B0%E5%BD%95.html"><span class="doc">DroneKit记录</span></a></p>
</section>
<section id="sitl">
<h2>SITL仿真<a class="headerlink" href="#sitl" title="Link to this heading"></a></h2>
<p>简介：SITL（Software In The Loop）仿真是一种在开发无人机时常用的技术。它允许开发者在实际硬件部署之前，在计算机上模拟整个系统的行为。今年用的主要是Ardupilot开发的SITL。</p>
<p>（详见”SITL调试”文档）</p>
<p><a class="reference internal" href="../SITL%E8%B0%83%E8%AF%95/SITL%E8%B0%83%E8%AF%95.html"><span class="doc">SITL调试</span></a></p>
</section>
</section>
<section id="linux">
<h1>Linux相关<a class="headerlink" href="#linux" title="Link to this heading"></a></h1>
<section id="id4">
<h2>Linux<a class="headerlink" href="#id4" title="Link to this heading"></a></h2>
<p>简介：Linux是一个开源的操作系统，许多开源软件只能在Linux上运行。Linux有许多发行版，Ubuntu就是其中之一。树莓派和英伟达Jetson使用的操作系统为定制化后的Ubuntu。</p>
<p>掌握：</p>
<ol class="simple">
<li><p>常用操作命令：ls、cd、mkdir、touch、rm等</p></li>
<li><p>BASH基本命令并会编写sh脚本</p></li>
<li><p>配置开机自启动脚本（crontab或gnome自带的开机自启动）</p></li>
<li><p>vim编辑器的使用（可选）</p></li>
<li><p>其他需要在Linux下完成的任务</p></li>
</ol>
</section>
</section>
<section id="id5">
<h1>图像识别相关<a class="headerlink" href="#id5" title="Link to this heading"></a></h1>
<section id="numpy">
<h2>NumPy<a class="headerlink" href="#numpy" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://www.numpy.org.cn/reference/">NumPy 参考手册 | NumPy</a></p>
<p>简介：NumPy是一个使用Python进行科学计算的基础包，它提供了强大的多维数组对象和一系列用于处理数组的工具，是许多其他库的重要依赖。例如，在神经网络里，数据都被转换成N维数组（ndarray），YOLO推理返回的结果也是一个N维数组。OpenCV里，图像也是用NumPy的ndarray形式储存。我们最需要了解的也就是ndarray数组。</p>
</section>
<section id="yolo">
<h2>YOLO神经网络<a class="headerlink" href="#yolo" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://docs.ultralytics.com/">YOLO官网</a></p>
<p>Github：https://github.com/ultralytics/ultralytics</p>
<p>简介：YOLO (You Only Look Once)是一种流行的目标检测和图像分割模型，于2015年推出，因其高速度和准确性而迅速受到欢迎。今年我们用于识别靶标的模型为YOLOv8-obb变体，obb意味着Oriented Bounding Boxes，即旋转目标检测。用于识别数字的为YOLOv8默认的detect模型。</p>
<p>掌握：</p>
<ol class="simple">
<li><p>使用RoboFlow等工具进行数据集标注、预处理与导出。</p></li>
<li><p>进行YOLO模型的训练</p></li>
<li><p>在python中使用YOLO模型进行推理并且会使用推理结果</p></li>
<li><p>使用TensorRT进行模型推理的加速</p></li>
</ol>
<p>注意：在设备中安装训练调用模型的ultralytics库时，会对Python的环境产生较大的影响，请在云服务器部署或事先做好版本隔离。</p>
</section>
<section id="opencv">
<h2>OpenCV<a class="headerlink" href="#opencv" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://apachecn.github.io/opencv-doc-zh/#/">中文文档</a></p>
<p>简介：OpenCV是一个开源计算机视觉库，采用C++编写，提供了python接口。今年我们主要用OpenCV来处理图像。一般用到特定的功能去查对应的函数即可。</p>
<ol class="simple">
<li><p>视频流处理、透视变换、图像分割、绘制文字等等</p></li>
<li><p>图像预处理可以用OpenCV的运动模糊</p></li>
<li><p>可以编写脚本用OpenCV在不同背景下自动生成靶标的数据集</p></li>
</ol>
<p>可以考虑开发一下OpenCV的其他功能，例如很多学校都是用OpenCV的模板匹配来进行数字识别。假如我们也用这种路线的话，可以减轻机载电脑的计算压力。</p>
</section>
</section>
<section id="python">
<h1>python相关<a class="headerlink" href="#python" title="Link to this heading"></a></h1>
<section id="anaconda-minicondaminiforge">
<h2>Anaconda(Miniconda、Miniforge)<a class="headerlink" href="#anaconda-minicondaminiforge" title="Link to this heading"></a></h2>
<p>Anaconda是一个完整的数据科学和机器学习平台，它预装了很多的python数据科学包。此外，它还能做python环境的隔离，这对于需要运行在不同Python环境的程序来说非常重要。Miniconda是一个精简版的Anaconda，包含少量的包，也能用于环境的隔离。此外还有Miniforge，也可以做到环境隔离的效果。</p>
</section>
<section id="logging">
<h2>logging库<a class="headerlink" href="#logging" title="Link to this heading"></a></h2>
<p>简介：logging库是Python的标准库之一，提供日志记录系统。我们主要用它来记录程序日志，把一些重要的数据记录下来。当然，也可以用来分析程序是如何崩掉的。</p>
</section>
<section id="argparse">
<h2>argparse库<a class="headerlink" href="#argparse" title="Link to this heading"></a></h2>
<p>简介：Python的标准库，用于解析命令行参数。使得用户在运行py文件时可以加上类似<code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">detect.py</span> <span class="pre">--conf</span> <span class="pre">0.5</span></code>的参数，程序就会接收到conf=0.5这个值。</p>
</section>
<section id="multiprocessing">
<h2>multiprocessing库<a class="headerlink" href="#multiprocessing" title="Link to this heading"></a></h2>
<p>简介：Python的标准库，用于创建进程，提供进程间通信和共享数据的方式。在今年的程序中较为重要，但使用起来也有许多麻烦的地方。包括但不限于：不同进程间内存不能直接共享、多个进程访问同一块资源需要使用锁（Lock）、子进程关闭不当会卡死主进程等。</p>
<ol class="simple">
<li><p>掌握multiprocessing中的Process、Queue、Event、ShareableList、Lock等</p></li>
<li><p>掌握子进程的优雅（Gracefully）关闭</p></li>
</ol>
</section>
</section>
<section id="id6">
<h1>一些补充<a class="headerlink" href="#id6" title="Link to this heading"></a></h1>
<ol>
<li><p>尽量在地面把能测试的代码全部测试通过，不要将问题带到天上，否则一个小错误就有可能导致炸机。</p>
<blockquote>
<div><p>例如locate程序传参顺序出错，导致靶标定位至中东，飞机规划了一条飞向中东的航线</p>
</div></blockquote>
</li>
<li><p>做好特情处理，代码尽量把所有情况都考虑清楚，尤其要考虑程序在某处崩了，飞机能否按照既定航线降落。</p>
<blockquote>
<div><p>例如navigate程序在更改航点命令时，会先清空飞控航点再上传新航点，如果上传出错，飞机会进入RTL盘旋</p>
</div></blockquote>
</li>
<li><p>航点文件中的起飞命令注意两个参数：PITCH ANGLE和Alt。PITCH ANGLE必须设置，它决定飞机起飞的俯仰角。Alt必须和飞控内部的TKOFF_ALT参数对应，若该值小于TKOFF_ALT，会导致飞机到达该值后，飞控认为起飞任务未结束，不飞向第二个航点。</p></li>
<li><p>若用DroneKit给飞控上传航点文件，航点文件需删0开头的那一行</p></li>
</ol>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="index.html" class="btn btn-neutral float-left" title="汇总" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="../DroneKit%E8%AE%B0%E5%BD%95/DroneKit%E8%AE%B0%E5%BD%95.html" class="btn btn-neutral float-right" title="DroneKit记录" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2024, xjh。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>